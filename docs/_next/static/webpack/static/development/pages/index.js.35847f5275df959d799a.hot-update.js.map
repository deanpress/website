{"version":3,"file":"static/webpack/static/development/pages/index.js.35847f5275df959d799a.hot-update.js","sources":["webpack:///./components/Layout/Context.js","webpack:///./components/Layout/Layout.js"],"sourcesContent":["import React from 'react';\n\nconst { Provider, Consumer } = React.createContext('https://github.com/nos/client/releases');\n\nexport { Provider, Consumer };\n","import 'what-input';\nimport Head from 'next/head';\nimport cookie from 'js-cookie';\nimport { string, bool } from 'prop-types';\n\nimport Navigation from '../Navigation';\nimport Footer from '../Footer';\nimport GDPRBanner from '../GDPRBanner';\n\nimport './Layout.scss';\nimport { Provider } from './Context';\n\nexport default class Layout extends React.Component {\n  static propTypes = {\n    title: string,\n    fixed: bool\n  }\n\n  static defaultProps = {\n    title: 'nOS - Operating System for the Decentralized Internet',\n    fixed: false\n  }\n\n  state = {\n    accepted: true,\n    downloadUrl: 'https://github.com/nos/client/releases'\n  }\n\n  setDownloadUrl = async () => {\n    const resp = await fetch('https://api.github.com/repos/nos/client/releases/latest');\n    const response = await resp.json();\n    const assets = response.assets;\n\n    assets.forEach(asset => {\n      const browserDownloadUrl = asset.browser_download_url;\n\n      if ((browserDownloadUrl.endsWith(\".exe\") && navigator.platform.indexOf('Win') !== -1) || (browserDownloadUrl.endsWith(\".dmg\") && navigator.platform.indexOf('Mac') !== -1) || (browserDownloadUrl.endsWith(\".AppImage\") && navigator.platform.indexOf('Linux') !== -1)) {\n        this.setState({downloadUrl: browserDownloadUrl});\n      }\n    })\n  }\n\n  componentDidMount = () => {\n    this.setDownloadUrl();\n\n    if (!cookie.get('gdpr')) {\n      this.setState({ accepted: false });\n    }\n  }\n\n  render() {\n    return (\n      <Provider value={this.state.downloadUrl}>\n      <div>\n        <Head>\n          <meta charSet=\"utf-8\" />\n          <meta httpEquiv=\"x-ua-compatible\" content=\"ie=edge\" />\n          <meta name=\"description\" content=\"nOS is the Virtual Operating for the Decentralized Internet. Build, discover, and use Decentralized Applications\" />\n          <meta name=\"og:image\" content=\"static/dapps-snapshot.png\" />\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\" />\n          <link rel=\"shortcut icon\" href=\"static/logo-nos.png\" type=\"image/x-icon\" />\n          <title>{this.props.title}</title>\n        </Head>\n\n        <Navigation fixed={this.props.fixed} />\n        {this.props.children}\n        <Footer />\n        {this.renderBanner()}\n      </div>\n      </Provider>\n    );\n  }\n\n  renderBanner = () => {\n    if (this.state.accepted) {\n      return null;\n    }\n\n    return <GDPRBanner accepted={this.state.accepted} onAccept={this.handleAccept} />;\n  }\n\n  handleAccept = () => {\n    this.setState({ accepted: true }, () => {\n      cookie.set('gdpr', 'true');\n    });\n  }\n}\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AAWA;AACA;AACA;AAFA;AACA;;;;;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AACA;AADA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAaA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAwBA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;AApCA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;AA3DA;AACA;AADA;AAEA;AACA;AAFA;AACA;AAFA;AAOA;AACA;AAFA;AACA;;;;;A","sourceRoot":""}